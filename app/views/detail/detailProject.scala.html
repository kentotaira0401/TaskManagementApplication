@(projectRequest:models.request.ProjectRequest)
@import play.i18n._

@main("detail-page") {
@* <meta charset="utf-8"> FOR ECLIPSE CHARSET DETECTION *@
<link rel="stylesheet" type="text/css" media="screen" href="@routes.Assets.versioned("/stylesheets/css/detailProject.css")">


<body class style>
  <div class="container">
	<!-- <h1>projectRequest.name</h1> --><!-- これはできなかった -->
	<h1>@projectRequest.name</h1>
	<hr>
	<!-- <h1>@{projectRequest.getName}pj</h1> -->
		@helper.form(action = routes.Application.createdProject) { 
	
	<div class="box card border-light mb-3 non-progress" style="max-width: 20rem;">
	<div class="non-progress-header">@projectRequest.name</div>

			<div id="new-task"></div>
			<div id="cancel-task-button"></div>
			<div class="task-button" id ="add-task">
				<button type="button" class="btn btn-secondary btn-lg" onclick="clickBtn3()"> ＋ タスクの追加 </button>
			</div>
			<div class="box__list-task" id = "task-list">
				<div class="box shadow-sm-original card border-light mb-2 inside-project">
					<div class="task-header">@projectRequest.name</div>
				</div>
			</div>


	</div>

  </div>	
</body>

<script>
	// タスク追加ボタン押下時
	function clickBtn3() {
		const newTask = document.getElementById("new-task");
		const cancelTaskButton = document.getElementById("cancel-task-button");
		// 要素の追加
		if (!newTask.hasChildNodes()) {
			// タスク名入力用テキストフィールド出力
			const input1 = document.createElement("input");
			input1.setAttribute("type", "textarea");
			input1.setAttribute("class", "form-control");
			input1.setAttribute("id", "exampleTextarea");
			input1.setAttribute("rows", "2");
			input1.setAttribute("placeholder", "新しいタスク名");
			newTask.appendChild(input1);
			
			//　追加ボタン出力
			const outputAddButton = document.createElement("button");
			outputAddButton.setAttribute("type", "button");
			outputAddButton.setAttribute("class", "btn btn-primary");
			outputAddButton.setAttribute("id", "output-add-button");
			outputAddButton.setAttribute("onclick", "clickBtn4()");
			cancelTaskButton.appendChild(outputAddButton);
			
			// ボタンに「追加」出力
			var newtextAdd = document.createTextNode("追加");
			var addTaskButton2 = document.getElementById("output-add-button");
			addTaskButton2.appendChild(newtextAdd);
			
			//　キャンセルボタン出力
			const cancelButton = document.createElement("button");
			cancelButton.setAttribute("type", "button");
			cancelButton.setAttribute("class", "btn btn-secondary");
			cancelButton.setAttribute("id", "cancel-button");
			cancelButton.setAttribute("onclick", "clickBtn5()");
			cancelTaskButton.appendChild(cancelButton);
			
			// ボタンに「キャンセル」出力
			var newtext = document.createTextNode("キャンセル");
			var cancelTaskButton2 = document.getElementById("cancel-button");
			cancelTaskButton2.appendChild(newtext);
			
			// タスク追加ボタン削除
			const addTask = document.getElementById("add-task");
			if (addTask.hasChildNodes()) {
				addTask.remove(addTask);
			}
			
		}
	}
	// キャンセルボタン押下時処理
	function clickBtn5() {
		// 
		const addTask = document.getElementById("add-task");
		const newTask = document.getElementById("new-task");
		const cancelTaskButton = document.getElementById("cancel-task-button");
		
		// タスク追加ボタンを再度出現させる
		if (addTask==null) {
			const element = document.getElementById('cancel-task-button');
			element.insertAdjacentHTML('afterend', '<div class="task-button" id ="add-task">');
			const div1 = document.getElementById("add-task");
			div1.insertAdjacentHTML('afterbegin', '<button type="button" class="btn btn-secondary btn-lg" onclick="clickBtn3()"> ＋ タスクの追加 </button>');
		}
		//　タスク名用テキストエリア消去
		if (newTask.hasChildNodes()) {
			newTask.removeChild(newTask.firstChild);
		}
		//　キャンセルボタン消去
		if (cancelTaskButton.hasChildNodes()) {
			cancelTaskButton.removeChild(cancelTaskButton.firstChild);
			cancelTaskButton.removeChild(cancelTaskButton.firstChild);
		}
		
	}
</script>

}
		

}
